<div class="row">
  <div class="loadingBg" *ngIf="loading">
    <div class="loaderInner">
      <img src="./assets/images/homeLoader.gif" />
    </div>
  </div>
  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ReportArea">
    <ul class="gameTab">
      <li (click)="onSubmitReportPl('pl'); openTabs('profitLoss');" class="{{tabToggle['profitLoss'] ? 'active' : 'deactive'}}">{{ 'Profit & Loss' | translate }}</li>
      <li (click)="onSubmitReportTxn('txn'); openTabs('transactions');" class="{{tabToggle['transactions'] ? 'active' : 'deactive'}}">{{ 'Transactions' | translate }}</li>
      <li (click)="onSubmitAccountStatementReport(); openTabs('accountStatement');" class="{{tabToggle['accountStatement'] ? 'active' : 'deactive'}}">{{ 'Running Balance' | translate }}</li>
    </ul>

    <!-- Profit Loss -->
    <div *ngIf="tabToggle['profitLoss']" class="ptReport {{tabToggle['profitLoss'] ? 'active' : 'deactive'}}">

      <ng-template #customCellTemplate let-day="day" let-locale="locale">
        <div *ngIf="day.events[0]" class="cal-cell-top {{(day.events[0].title < 0) ? 'positive' : 'negative'}}">
          <span class="cal-day-number">{{ day.date | calendarDate:'monthViewDayNumber':locale }}</span>
          <span *ngIf="day.events[0].title < 0" class="cal-day-badge">{{ (-1*day.events[0].title).toFixed(2)}}</span>
          <span *ngIf="day.events[0].title >= 0" class="cal-day-badge">{{ (day.events[0].title).toFixed(2)}}</span>
        </div>

        <div *ngIf="!day.events[0]" class="cal-cell-top">
          <span class="cal-day-number">{{ day.date | calendarDate:'monthViewDayNumber':locale }}</span>
        </div>

      </ng-template>

      <div class="row text-center frReport">
        <div class="col-lg-4 col-md-4 col-md-offset-4 col-sm-4 col-xs-6 totalAmount">
          <span class="dateTxt">{{ viewDate | calendarDate:(view + 'ViewTitle'):'en' }}</span>
          <span *ngIf="plReportTotal < 0" class="totalPrice">Total :
            <span class="positive">{{-1*plReportTotal.toFixed(2)}}</span>
          </span>
          <span *ngIf="plReportTotal >= 0" class="totalPrice">Total :
            <span class="negative">{{(plReportTotal).toFixed(2)}}</span>
          </span>

        </div>
        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-6 tabletab">
          <div class="btn-group mobLeft pull-right">
            <div class="btn btn-primary" mwlCalendarPreviousView [view]="view" (click)="onSubmitReportPlNextPre('pl')" [(viewDate)]="viewDate">
              Previous
            </div>
            <div class="btn btn-outline-secondary" mwlCalendarToday (click)="onSubmitReportPl('pl')" [(viewDate)]="viewDate">
              Today
            </div>
            <div *ngIf="removeNext" class="btn btn-primary" mwlCalendarNextView [view]="view" (click)="onSubmitReportPlNextPre('pl')"
              [(viewDate)]="viewDate">
              Next
            </div>
          </div>
        </div>
      </div>
      <div class="reporttable" [ngSwitch]="view">
        <mwl-calendar-month-view *ngSwitchCase="'month'" [cellTemplate]="customCellTemplate" [viewDate]="viewDate" [events]="events"
          [refresh]="refresh" [activeDayIsOpen]="activeDayIsOpen" (dayClicked)="dayClicked($event.day);">
        </mwl-calendar-month-view>
      </div>

    </div>

    <!-- Transactions -->
    <div *ngIf="tabToggle['transactions']" class="ptReport {{tabToggle['transactions'] ? 'active' : 'deactive'}}">

      <ng-template #customCellTemplate let-day="day" let-locale="locale">
        <div *ngIf="day.events[0]" class="cal-cell-top {{(day.events[0].title >= 0) ? 'positive' : 'negative'}}">
          <span class="cal-day-number">{{ day.date | calendarDate:'monthViewDayNumber':locale }}</span>
          <span *ngIf="day.events[0].title >= 0" class="cal-day-badge">{{ (day.events[0].title).toFixed(2)}}</span>
          <span *ngIf="day.events[0].title < 0" class="cal-day-badge">{{ (-1*day.events[0].title).toFixed(2)}}</span>
        </div>

        <div *ngIf="!day.events[0]" class="cal-cell-top">
          <span class="cal-day-number">{{ day.date | calendarDate:'monthViewDayNumber':locale }}</span>
        </div>

      </ng-template>

      <div class="row text-center frReport">
        <div class="col-lg-4 col-md-4 col-md-offset-4 col-sm-4 col-xs-6 totalAmount">
          <span class="dateTxt">{{ viewDate | calendarDate:(view + 'ViewTitle'):'en' }}</span>
          <span *ngIf="plReportTotal >= 0" class="totalPrice">Total :
            <span class="positive">{{plReportTotal.toFixed(2)}}</span>
          </span>
          <span *ngIf="plReportTotal < 0" class="totalPrice">Total :
            <span class="negative">{{(-1*plReportTotal).toFixed(2)}}</span>
          </span>

        </div>
        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-6 tabletab">
          <div class="btn-group mobLeft pull-right">
            <div class="btn btn-primary" mwlCalendarPreviousView [view]="view" (click)="onSubmitReportPlNextPre('txn')" [(viewDate)]="viewDate">
              Previous
            </div>
            <div class="btn btn-outline-secondary" mwlCalendarToday (click)="onSubmitReportTxn('txn')" [(viewDate)]="viewDate">
              Today
            </div>
            <div *ngIf="removeNext" class="btn btn-primary" mwlCalendarNextView [view]="view" (click)="onSubmitReportPlNextPre('txn')"
              [(viewDate)]="viewDate">
              Next
            </div>
          </div>
        </div>
      </div>
      <div class="reporttable" [ngSwitch]="view">
        <mwl-calendar-month-view *ngSwitchCase="'month'" [cellTemplate]="customCellTemplate" [viewDate]="viewDate" [events]="events"
          [refresh]="refresh" [activeDayIsOpen]="activeDayIsOpen" (dayClicked)="dayClicked($event.day);">
        </mwl-calendar-month-view>
      </div>

    </div>

    <!-- Running Balance -->
    <div *ngIf="tabToggle['accountStatement']" class="ptReport {{tabToggle['accountStatement'] ? 'active' : 'deactive'}}">

      <ng-template #customCellTemplate let-day="day" let-locale="locale">
        <div *ngIf="day.events[0]" class="cal-cell-top">
          <span class="cal-day-number">{{ day.date | calendarDate:'monthViewDayNumber':locale }}</span>
          <!-- <span *ngIf="day.events[0].title >= 0" class="cal-day-badge">{{ (day.events[0].title).toFixed(2)}}</span> -->
          <span class="cal-day-open">Opening</span>
          <span class="cal-day-badgeUp">{{(day.events[0].meta[0].balance)}}</span>
          <span class="cal-day-close">Closing</span>
          <span class="cal-day-badge">{{(day.events[0].title)}}</span>
        </div>

        <div *ngIf="!day.events[0]" class="cal-cell-top">
          <span class="cal-day-number">{{ day.date | calendarDate:'monthViewDayNumber':locale }}</span>
        </div>

      </ng-template>

      <div class="row text-center frReport">
        <div class="col-lg-4 col-md-4 col-md-offset-4 col-sm-4 col-xs-6 totalAmount">
          <span class="dateTxt">{{ viewDate | calendarDate:(view + 'ViewTitle'):'en' }}</span>
          <span *ngIf="plReportTotal >= 0" class="totalPrice">Current Balance :
            <span class="positive">{{plReportTotal.toFixed(2)}}</span>
          </span>
          <span *ngIf="plReportTotal < 0" class="totalPrice">Current Balance :
            <span class="negative">{{(plReportTotal).toFixed(2)}}</span>
          </span>

        </div>
        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-6 tabletab">
          <div class="btn-group mobLeft pull-right">
            <div class="btn btn-primary" mwlCalendarPreviousView [view]="view" [(viewDate)]="viewDate">
              Previous
            </div>
            <div class="btn btn-outline-secondary" mwlCalendarToday [(viewDate)]="viewDate">
              Today
            </div>
            <div *ngIf="removeNext" class="btn btn-primary" mwlCalendarNextView [view]="view" [(viewDate)]="viewDate">
              Next
            </div>
          </div>
        </div>
      </div>
      <div class="reporttable" [ngSwitch]="view">
        <mwl-calendar-month-view *ngSwitchCase="'month'" [cellTemplate]="customCellTemplate" [viewDate]="viewDate" [events]="events"
          [refresh]="refresh" [activeDayIsOpen]="activeDayIsOpen" (dayClicked)="dayClicked($event.day);">
        </mwl-calendar-month-view>
      </div>


    </div>

  </div>
</div>
